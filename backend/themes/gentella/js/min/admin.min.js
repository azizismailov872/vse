function addCaretToMenu(){let e=$(".side-menu li");if(e.length>0){let t;for(t=0;t<e.length;t++)if($(e[t]).children(".child_menu").length>0){let n=$(e[t]).children("a");$(n).append('<span class="fa fa-chevron-down"></span>'),$(n).click(function(e){e.preventDefault()})}}}function resetUrl(){return pathname=location.href,pathname.indexOf("?")>-1&&(pathname=pathname.split("?"),pathname=pathname[0]),pathname=pathname.substr(pathname.lastIndexOf("/")+1)+get_data,$.ajax({url:"pathname"}).always(function(){window.location.replace(pathname)}),!1}function fileCount(){let e=document.querySelectorAll(".input__file");Array.prototype.forEach.call(e,function(e){let t=e.nextElementSibling,n=t.innerText;e.addEventListener("change",function(e){let a="";this.files&&this.files.length>=1&&(a=this.files.length),t.innerText=a?"Выбрано файлов: "+a:n})})}function make_action(e,t,n){null!==t&&$.ajax({url:e,data:t,type:"POST",dataType:"json",success:function(e){null!==n?($.pjax.defaults.timeout=500,$.pjax.reload({container:n}),null!==e&&console.log(e.msg)):null!==e&&console.log(e.msg)},error:function(){console.log(res.msg)}})}let get_data="";$(document).ready(function(){addCaretToMenu(),$(".mask").inputmask({mask:"+\\9\\9\\6(999)999-999"}),$(".input__file__button").append('<span class="fas fa fa-download"></span>'),fileCount(),$("#reset_btn").click(function(){resetUrl()}),$(".delete_profile_btn").click(function(){id=$(this).attr("id"),data={id:id},url="/admin/user/delete-image",grid_id="#user-photo",make_action(url,data,grid_id)}),$(".delete_category_btn").click(function(){id=$(this).attr("id"),data={id:id},url="/admin/category/delete-image",grid_id="#category-photo",make_action(url,data,grid_id)})});